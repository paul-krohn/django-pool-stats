{% extends "stats/base.html" %}

{% block title %}SFPA :: matchup{% endblock %}

{% block content %}
<div class="text-center">
<h2>Matchup</h2>
</div>
<form id='the_form' action="{% url 'matchup' %}" method="get">
    {% csrf_token %}
    {{ form }}
    <input type="submit" value="Submit">
</form>
<hr />
<h3>Weeks</h3>
{%  for week in weeks %}
{#    <a href="#" id="week_{{ week.id }}">{{ week }}</a>#}
    <a href="#" onclick="setThing('#id_week', {{ week.id }}, '#id_thing');">{{ week }}</a>
{%  endfor %}
<hr />

{% if score_sheets %}
    <h3>Score sheets</h3>
    <ul>
        {% for score_sheet in score_sheets %}
            <li><a href="#" onclick="setThing('#id_thing', {{ score_sheet.id }});">{{ score_sheet }}</a></li>
        {% endfor %}
    </ul>
<hr />
{% endif %}


{% if matches %}
<h3>Matches</h3>
    <ul>
    {% for match in matches %}
        <li><a href="#" onclick="setThing('#id_thing', {{ match.id }});">{{ match }}</a></li>
    {% endfor %}
    </ul>
<hr/>
{% endif %}
<script type="application/javascript">

function setThing(id, value, clear=undefined) {
    $(id).val(value);
    if (clear) {
        $(clear).val('')
    }
    $( "#the_form" ).submit();
}

</script>

<table class="table" data-sort-name="Rank" data-toggle="table" data-sort-order="asc" id="foo">
  <thead>
    <tr>
        <th style="text-align:right;">Away</th>
        <th>A pct</th>
        <th>Home</th>
    </tr>
  </thead>
    <tbody>

    {% for match_up in match_ups %}
    <tr>
        <td style="text-align:right;" class="scoresheet-cell"><div class="scoresheet-cell"><a href="{% url 'player' match_up.away.player.id %}">{{ match_up.away.player }}</a> ({{ match_up.away.elo|floatformat:0 }})</div></td>
        <td style="text-align:right;">{{ match_up.pct|floatformat:2 }}</td></td>
        <td><a href="{% url 'player' match_up.home.player.id %}">{{ match_up.home.player }}</a> ({{ match_up.home.elo|floatformat:0 }})</td>
    </tr>
    {% endfor %}
    <tr>
    <td colspan="2">expected wins for away team:</td><td>{{ expected_wins|floatformat:3 }}</td>
    </tr>
    </tbody>


    </table>

{% endblock %}